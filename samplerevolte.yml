revolte:
  version: "1.0"
  project: "facebook"
  appName: "shipping"
  config:
    codeQuality:
      codeStyle:
        rules:
          style/BlockDelimiters: error
          style/CaseEquality: error
          style/ClassAndModuleChildren: error
    testSuite:
      command: "rails test --verbose"
  env:
    qa:
      branch: "testing-cache"
      codeQuality: true
      testSuite: true
      services:
        rid_1:
          name: "order-service"
          type: "WEB_SERVICE"
          entryPoint: "config.ru"
          specifications:
            cpu: 2
            memory: 2
            storage: 30
          properties:
            health: "/health"
            port: 3000
            preScript:
                      - bundle exec rails db:migrate  
                      - bundle exec rails db:seed     
            variables:
              RAILS_ENV: "production"
              RAILS_MASTER_KEY: "a8995b446917058172c313502da2f449"
              DATABASE_URL: "#{userDatabase.dbUrl}"
              DATABASE_PORT: "#{userDatabase.dbPort}"
              DATABASE_USERNAME: "#{userDatabase.dbUsername}"
              DATABASE_PASSWORD: "#{userDatabase.dbPassword}"
              DATABASE_NAME: "#{userDatabase.dbName}"
              DATABASE_CONNECTION_STRING: "#{userDatabase.dbConnectionString}"
              CACHE_HOST: '#{cacheService.cacheHost}'
              CACHE_PORT: '#{cacheService.cachePort}'
              CACHE_PASSWORD: '#{cacheService.cachePassword}'
              PORT: 3000
                
        rid_2:
            name: "userDatabase"
            type: "DATABASE"
            specifications:
              engine: "mysql"
              cpu: 2
              memory: 1
              storage: 20

        rid_3:
          name: "cacheService"
          type: "CACHE"
          specifications:
            cpu: 2
            memory: 0.5
